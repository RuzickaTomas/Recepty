<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <h:head>
        <title>Recepty</title>
    </h:head>
    <h:body>
        <h2>Výpis všech receptů</h2>

        <h:form>
            <h:commandLink action="createRecept">Novy recept</h:commandLink>
            <h:commandButton action="#{recepty.smaz()}" value="#{!recepty.smazat ? 'Smazat' : 'Zavrit'}" ></h:commandButton>
        </h:form>
        <style>
            #recepts {
                width: 100%;
                display: flex;
                justify-content: center;
            }

            #cards {
                display: grid;
                column-gap: 15px;
                grid-template-columns: 490px 490px 490px 490px;
            }

            .card {
                margin:5px;
                padding:3px;
                display: flex;
                flex-direction: column;
                width: 490px;
                height:400px;
                box-shadow:  0 4px 4px 0 lightgray;
            }

            #picture {
                background-color: black;
                margin: 0 auto;
            }
            
            #ledge {
                padding-left: 8px;
                width: 490px;
            }

            #grid {
                display: grid;
                grid-template-columns: 402px 80px;
                height: 90px;
            }

            #remove {
                width: 75px;
                height: 79px;
                text-align: center;
                background-color: red;
                font-size: 60px;
                color: white;
            }

            #remove:after {
                display: flex;
                justify-content: center;
                display: inline-block;
                content: "\00d7";
            }

        </style>
        <div id="recepts">
            <h:form id="cards">
                <!-- vypiseme cyklicky vsechny recepty  -->
                <ui:repeat value="#{recepty.getRecepty()}" var="r">
                    <div class="card">
                        <!-- pro kazdy recept ziskame obrazek  -->
                        <img id="picture" src="#{recepty.getPicture(r)}" alt="#{r.id}" width="480" height="320"/>
                        <div id="ledge">
                            <div id="grid">
                                <!-- nazev receptu s odkazem na detail  -->
                                <h:commandLink id="name" action="recept" actionListener="#{recepty.openDetail()}" value="#{r.name}" >
                                    <f:param name="receptId" value="#{r.id}"/>
                                </h:commandLink>  
                                <!-- tlacitko pro smazani receptu  -->
                                <h:commandLink rendered="#{recepty.smazat}" actionListener="#{recepty.remove(r)}">
                                    <div id="remove"></div>
                                </h:commandLink> 
                            </div>
                        </div>
                    </div>
                </ui:repeat>
            </h:form>
        </div>
    </h:body>
</html>
